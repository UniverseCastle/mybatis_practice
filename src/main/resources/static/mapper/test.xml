<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ex.repository.TestMapper">

	<!-- 회원가입 -->
	<insert id="mytestInsert" parameterType="MyTestDTO">
		insert into mytest values(
			#{username},
			#{password},
			#{age},
			#{birth},
			sysdate
		)
	</insert>
	
	<!-- 로그인 -->
	<select id="mytestLogin" resultType="int">
		select count(*)
		from mytest
		where username=#{username} and password=#{password}
	</select>
	
	<!-- sql
		재사용 하기 위한 태그
		공통으로 사용될 조건을 빼둔 것
		<include> 태그로 적용한다. -->
	<sql id="whereUsername">
		where username=#{username}
	</sql>
	
	<!-- 내정보 -->
	<select id="mytestMyInfo" resultType="MyTestDTO">
		select *
		from mytest
		<include refid="whereUsername"	/>
	</select>
	
	<!-- 전체회원 정보 -->
	<select id="mytestUserInfo" resultType="MyTestDTO">
		select *
		from mytest
	</select>
	
	<!-- 회원탈퇴 -->
	<delete id="mytestDelete">
		delete
		from mytest
		<include refid="whereUsername"	/>
	</delete>
	
	<!-- 정보수정 -->
	<update id="mytestUpdate" parameterType="MyTestDTO">
		update mytest set
			username=#{username},
			password=#{password},
			age=#{age}
			<include refid="whereUsername"	/>
	</update>
</mapper>